# Торговые стратегии и Debut
Это демо репозиторий, с преднастроенным окружением Debut. И несколькими стратегиями от комьюнити.

## Файловая структура
```
|-- .tokens.json - пользовательские токены доступа для работы с биржей
|-- schema.json - описание расположения файлов запуска
|-- src/
    |-- strategies/
        |-- strategy1/ - директория стратегий
            |-- bot.ts - Реализация стратегии
            |-- meta.ts - Мета данные, для запуска и для оптимизации
            |-- cfgs.ts - Конфигурации, для запуска в tester и genetic
        |-- strategy2/
        ...

```

# Установка и настройка

### Получение токенов API

[Инструкция Binance](https://www.binance.com/ru/support/faq/360002502072)

[Инструкция Tinkoff](https://tinkoffcreditsystems.github.io/invest-openapi/auth/#_2)

### Установка токенов
Для работы необходимо создать файл .tokens.json, в него добавить токен для работы.

Для Тинькофф:

```json
{
    "tinkoff": "YOU_TOKEN"
}
```

Для Binance:
```json
{
    "binance": "YOU_TOKEN",
    "binanceSecret": "YOU_SECRET
}
```

Можно использовать любое название поля для токена, подробнее в разделе [документации о настройках токенов]().

## Установка npm пакетов
Для установки пакетов выполните:
```bash
npm install
```

## Сборка проекта
```bash
npm run compile
```

*Рекомендуется выполнять сборку перед каждым запуском тестирования*

`npm run compile && npm run ...`
## Запуск тестирования на исторических данных
Исторические данные будут загружаться автоматически при запуске. Все загружаемые данные сохраняются в папку `history` в корне проекта, затем переиспользуются.

**Перед запуском стоит убедиться:**
* В файле `cfgs.ts` есть нужный вам тикер
* Для получения истории в файле `.tokens.json` может требоваться токен
* История акции или токена существует в запрашиваемом количестве дней

Для запуска выполните команду:
```bash
npm run testing -- --bot=FTBot --ticker=CRVUSDT --days=200 --gap=20 --amount=500
```

Для просмотра результатов тестирования в браузере выполните
```bash
npm run serve
```

Результаты будут доступны для просмотра на `http://localhost:5000/`

Подробрее о параметраз запуска тестирования можно прочитать в [документации]()

## Запуск генетической оптимизации

Выполните команду:
```bash
npm run genetic -- --bot=FTBot --ticker=CRVUSDT --days=200 --gap=30 --gen=12 --pop=2000 --log
```

Подробрее о параметрах запуска генетика можно прочитать в [документации]()

После запуска с параметром --log, генетик будет выдавать данные в консоль

```bash
Binance history loading from Wed Nov 18 2020 03:00:00 GMT+0300 (Moscow Standard Time)...

----- Genetic Start with 17314 candles -----

Generation:  0
Generation time:  5.15 s
Stats:  {
  population: 100,
  maximum: 20.8,
  minimum: -1.24,
  mean: 2.5174,
  stdev: 3.8101996325652054
}
Generation:  1
...
```

## Запуск генетической оптимизации с перебором тикеров/токенов
Выполните команду:
```bash
npm run finder -- --bot=FTBot --ticker=CRVUSDT --days=200 --gap=30 --gen=12 --pop=2000 --log
```
Используйте опцию `--crypt`, чтобы брать крипто-пары из файла `./crypt.json` (По умаолчанию там актуальные кросс-маржинальные пары Binance)

По умолчанию для потоковой оптимизации используется набор тикеров акций из файла `stocks.json`

Подробрее о параметрах запуска потокового генетика можно прочитать в [документации]()
